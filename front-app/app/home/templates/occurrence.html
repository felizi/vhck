<ion-view view-title="Occurrence">

  <ion-content class="padding">
    <div>

      <div ng-repeat="occurrence in occurrences | orderBy:'-dateUpdate'" ng-class="{'neighbors-card': true, 'even-card': $even}">
        <div class="card-main-image" style="width: 100%; height: 125px; background-color: #999;"></div>
        <div ng-class="['card-header-info', 'padding']" style=" overflow: hidden;">
          <label ng-class="['card-header-type']" style="font-size: 9px; float: left;">{{occurrence.type}}</label>
          <label style="font-size: 9px; float: right;">{{occurrence.views}} views</label>
        </div>
        <div ng-class="['padding', 'card-title']" ng-click="showDetails(occurrence.id, occurrence.cardType)">
          <span>{{occurrence.title}}</span>
        </div>
        <div style="padding-top: 20px; padding-bottom:5px; overflow: hidden; text-align: center;">

            <img src="main/assets/images/icon_fire.png" />
            <br />
            <span ng-if="occurrence.flamed" style="font-size: 9px; color: yellow;">You flamed</span>
            <br ng-if="occurrence.flamed"/>
            <span ng-class="['fire-count']" style="font-size: 9px;">{{occurrence.flames}} flames</span>

        </div>
        <div style="text-align: center;">
          <span ng-class="['card-comment-title']" ng-if="occurrence.comments.length > 2">lots of comments</span>
          <div ng-repeat="comment in occurrence.comments | limitTo: 2 | orderBy:'-commentAt'" ng-class="['padding', 'card-comment']">

            <div class="padding-bottom">
              <div ng-class="['comment-date']">
                <span>{{comment.commentAt}}</span>
              </div>
              <div ng-class="['comment-sender']">
                <span>{{comment.user.name}}</span>
              </div>
            </div>

            <span ng-class="['comment-text', 'padding-top']">
              <p>{{comment.comment}}</p>
            </span>

          </div>
          <div ng-class="['padding', 'card-leave-comment-button']" ng-click="showDetails(occurrence.id, occurrence.cardType)" >
            <span style="font-size: 9px;">+ leave your comment</span>
          </div>
        </div>
      </div>

    </div>
  </ion-content>
</ion-view>
